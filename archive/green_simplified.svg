<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg"
     width="700" height="900"
     viewBox="0 0 700 900"
     role="img" aria-labelledby="titleDesc">
  <title id="titleDesc">Diagrama de niveles y control</title>
  <desc id="desc">Diagrama esquemático en SVG sin colores, con líneas, flechas y textos</desc>

  <!-- Definimos las flechas arriba y abajo -->
  <defs>
    <marker id="arrow-up" markerWidth="10" markerHeight="10" refX="5" refY="10" orient="auto"
            markerUnits="strokeWidth">
      <path d="M0,10 L5,0 L10,10" fill="#000"/>
    </marker>
    <marker id="arrow-down" markerWidth="10" markerHeight="10" refX="5" refY="0" orient="auto"
            markerUnits="strokeWidth">
      <path d="M0,0 L5,10 L10,0" fill="#000"/>
    </marker>
  </defs>

  <!-- Nivel 3: Estructura del nivel de red -->
  <rect x="150" y="20" width="400" height="70" fill="none" stroke="#000" stroke-width="1"/>
  <text x="350" y="60" font-family="sans-serif" font-size="14" text-anchor="middle">(3) Nivel de red</text>

  <!-- Labels del nivel 3 -->
  <text x="200" y="110" font-family="sans-serif" font-size="12" text-anchor="middle">Inventario</text>
  <line x1="200" y1="115" x2="200" y2="130" stroke="#000"/>
  <text x="350" y="110" font-family="sans-serif" font-size="12" text-anchor="middle">Monitor</text>
  <line x1="350" y1="115" x2="350" y2="130" stroke="#000"/>
  <text x="500" y="110" font-family="sans-serif" font-size="12" text-anchor="middle">DataSheets / API</text>
  <line x1="500" y1="115" x2="500" y2="130" stroke="#000"/>

  <!-- Flecha hacia abajo a controlador -->
  <line x1="350" y1="80" x2="350" y2="150" stroke="#000" stroke-width="1" marker-end="url(#arrow-down)"/>

  <!-- Controlador -->
  <rect x="180" y="150" width="340" height="80" fill="none" stroke="#000" stroke-width="1"/>
  <text x="350" y="190" font-family="sans-serif" font-size="14" text-anchor="middle">Controlador (recolecta/calcula/agrupa)</text>

  <!-- Flechas desde controlador a bloques controlados -->
  <line x1="250" y1="230" x2="250" y2="250" stroke="#000" marker-end="url(#arrow-down)"/>
  <line x1="350" y1="230" x2="350" y2="250" stroke="#000" marker-end="url(#arrow-down)"/>
  <line x1="450" y1="230" x2="450" y2="250" stroke="#000" marker-end="url(#arrow-down)"/>

  <!-- Nivel 1: Dispositivos -->
  <rect x="50" y="250" width="600" height="300" fill="none" stroke="#000" stroke-width="1"/>
  <text x="350" y="280" font-family="sans-serif" font-size="14" text-anchor="middle">(1) Dispositivo / Componente</text>

  <!-- Ejemplo dispositivo 1 -->
  <rect x="70" y="310" width="100" height="50" fill="none" stroke="#000"/>
  <text x="120" y="340" font-family="sans-serif" font-size="12" text-anchor="middle">(I) Dispositivo Legado</text>

  <!-- Ejemplo dispositivo 2 -->
  <rect x="200" y="310" width="100" height="50" fill="none" stroke="#000"/>
  <text
